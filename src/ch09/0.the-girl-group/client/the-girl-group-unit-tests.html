<!DOCTYPE html>
<html lang="en">
  <head>
    <title>9 The Girl Group Unit Testing</title>
    <meta charset="utf-8">
    <base href="/">

    <script src="node_modules/typescript/lib/typescript.js"></script>
    <script src="node_modules/reflect-metadata/Reflect.js"></script>

    <link rel="stylesheet" href="node_modules/jasmine-core/lib/jasmine-core/jasmine.css">
    <script src="node_modules/jasmine-core/lib/jasmine-core/jasmine.js"></script>
    <script src="node_modules/jasmine-core/lib/jasmine-core/jasmine-html.js"></script>
    <script src="node_modules/jasmine-core/lib/jasmine-core/boot.js"></script>

    <script src="node_modules/zone.js/dist/zone.js"></script>
    <script src="node_modules/zone.js/dist/proxy.js"></script>
    <script src="node_modules/zone.js/dist/sync-test.js"></script>
    <script src="node_modules/zone.js/dist/jasmine-patch.js"></script>
    <script src="node_modules/zone.js/dist/async-test.js"></script>
    <script src="node_modules/zone.js/dist/fake-async-test.js"></script>
    <script src="node_modules/zone.js/dist/long-stack-trace-zone.js"></script>

    <script src="node_modules/systemjs/dist/system.src.js"></script>
    <script src="systemjs.config.js"></script>
  </head>
  <body>
    <script>
      var SPEC_MODULES = [
        'app/components/application/application.component.spec',
        'app/components/stars/stars.component.spec',
        'app/services/idol.service.spec',
      ];

      var orgOnload = window.onload;
      window.onload = function() {};

      Promise.all([
        System.import('@angular/core/testing'),
        System.import('@angular/platform-browser-dynamic/testing')
      ])
      .then(function(modules) {
        var testing = modules[0];
        var browser = modules[1];

        testing.TestBed.initTestEnvironment(
          browser.BrowserDynamicTestingModule,
          browser.platformBrowserDynamicTesting()
        );

        return Promise.all(SPEC_MODULES.map(function(module) {
          return System.import(module);
        }));
      })
      .then(orgOnload)
      .catch(console.error.bind(console));
    </script>
  </body>
</html>
